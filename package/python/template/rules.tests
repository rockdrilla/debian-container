#!/usr/bin/make -f

# never test them (always failing, maybe due to PGO+LTO)
TEST_EXCLUDES = test___all__ test_distutils test_email test_lib2to3 test_peg_generator test_selectors

# Debian 12 Bookworm, Python 3.11 - fine
# others - fail
TEST_EXCLUDES += test_minidom

# broken by our changes
TEST_EXCLUDES += test_ensurepip test_venv

# avoid compile-related tasks
TEST_EXCLUDES += test_tools

# misc unwanted tests:
TEST_EXCLUDES += test_compile

# don't bother with audio
TEST_EXCLUDES += test_linuxaudiodev test_ossaudiodev

# unused tests/backends
TEST_EXCLUDES += test_dbm test_dbm_ndbm

# only applies to debug build
TEST_EXCLUDES += test_gdb

# not supported by platform
TEST_EXCLUDES += test_devpoll test_ioctl test_kqueue test_launcher test_msilib test_startfile test_winconsoleio test_winreg test_winsound

# ui
TEST_EXCLUDES += test_idle test_tcl test_tix test_tk test_ttk_guionly test_turtle

# require network
TEST_EXCLUDES += test_smtpnet test_urllibnet test_urllib2net

# require enough disk space and a lot of time
TEST_EXCLUDES += test_zipfile64

export TEST_EXCLUDE   :=$(sort $(TEST_EXCLUDES))
export TEST_RESOURCES :=all,tzdata,-audio,-gui
TEST_OPTS = $(if $(filter verbose_check,$(DEB_BUILD_OPTIONS)),-v) -w -u$(TEST_RESOURCES) --timeout=1200 -x $(TEST_EXCLUDE)
